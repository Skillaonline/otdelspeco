<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CRID // AGENTS VERIFICATION — ROOM_X</title>
<style>
  :root{
    --bg:#070c14; --panel:#0e1728; --ring:#213355;
    --ink:#e6eef9; --muted:#8aa0bd; --accent:#67e8f9;
    --ok:#22c55e; --err:#ef4444;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1100px 760px at 70% 8%, #0f172a 0, #0a1020 50%, var(--bg) 70%);
    color:var(--ink); font:15px/1.45 "JetBrains Mono","Cascadia Mono","Courier New",monospace;
    display:flex; align-items:center; justify-content:center; padding:20px;
  }
  .wrap{
    width:min(1100px,96vw); display:grid; grid-template-columns:1fr 320px; gap:20px;
  }
  @media (max-width:980px){ .wrap{grid-template-columns:1fr} }

  .card{
    background:linear-gradient(180deg,#101a34,#0b1326 60%,#0a1222);
    border:1px solid var(--ring); border-radius:18px; box-shadow:0 20px 60px #000a;
    overflow:hidden;
  }
  .card h3{
    margin:0; padding:12px 16px; border-bottom:1px solid var(--ring);
    color:#cfe3ff; letter-spacing:.06em; font-size:14px; font-weight:700;
    background:linear-gradient(180deg,#0f1a36,#0b152a);
  }
  .card .content{padding:16px}

  .q{
    border:1px solid #243a67; border-radius:14px; padding:12px 12px 14px; margin-bottom:12px;
    background:linear-gradient(180deg,#0c1630,#0b1428);
  }
  .prompt{color:#cfe3ff; margin-bottom:8px; font-size:14px}
  .row{display:flex; gap:10px; align-items:center}
  .row input{
    flex:1; background:#0a1222; border:1px solid #253a67; border-radius:10px; padding:10px 12px;
    color:#dbeafe; font-family:inherit; font-size:15px;
    transition:border-color .25s, box-shadow .25s;
  }
  .row input:focus{outline:none; border-color:#3ea0ff; box-shadow:0 0 0 2px #3ea0ff33}
  .tag{
    min-width:92px; text-align:center; font-size:12px; font-weight:700; letter-spacing:.04em;
    border:1px solid #2c4677; border-radius:999px; padding:6px 8px; color:#9fb8df; background:#0b1730;
  }
  .tag.ok{color:#bbf7d0; border-color:#1c4d3a; background:#0a1f19}
  .tag.err{color:#fecaca; border-color:#7a2531; background:#2a0e14}

  .controls{display:flex; gap:10px; margin-top:8px; flex-wrap:wrap}
  .btn{
    border:1px solid #2a4677; background:#13284f; color:#dbeafe; border-radius:10px;
    padding:10px 14px; font-weight:700; letter-spacing:.04em; cursor:pointer;
    transition:.25s;
  }
  .btn:hover{filter:brightness(115%)}
  .btn:active{transform:translateY(1px)}

  .side .box{
    border:1px solid var(--ring); border-radius:14px; padding:14px; background:#0b1428; margin-bottom:12px;
  }
  .status{min-height:28px; margin-top:8px}
  .status.ok{color:var(--ok)}
  .status.err{color:var(--err)}

  .qr{
    display:none; text-align:center; padding:16px; border:1px solid #1b4d3f; border-radius:14px;
    background:#0a2019;
  }
  .qr img{width:160px; height:160px; filter:drop-shadow(0 0 8px #22c55e77)}
  .qr.show{display:block; animation:fade .5s ease}
  @keyframes fade{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none}}
</style>
</head>
<body>
<div class="wrap">
  <section class="card">
    <h3>CRID // VERIFY AGENTS — ROOM_X</h3>
    <div class="content">
      <!-- ВОПРОСЫ -->
      <div class="q" data-id="alpha">
        <div class="prompt">Кто зашифровал «альфа-код», спасший операцию в 2019 году?</div>
        <div class="row">
          <input type="text" placeholder="Фамилия агента" autocomplete="off">
          <span class="tag">ожидание</span>
        </div>
      </div>

      <div class="q" data-id="north4">
        <div class="prompt">Кто передал координаты точки «север-4» напрямую, нарушив протокол связи в 2020 году?</div>
        <div class="row">
          <input type="text" placeholder="Фамилия агента" autocomplete="off">
          <span class="tag">ожидание</span>
        </div>
      </div>

      <div class="q" data-id="sector8">
        <div class="prompt">Кто действовал под прикрытием в секторе 8 и вёл переговоры?</div>
        <div class="row">
          <input type="text" placeholder="Фамилия агента" autocomplete="off">
          <span class="tag">ожидание</span>
        </div>
      </div>

      <div class="q" data-id="intercept4">
        <div class="prompt">Кто зафиксирован на перехвате сигнала в точке 4?</div>
        <div class="row">
          <input type="text" placeholder="Фамилия агента" autocomplete="off">
          <span class="tag">ожидание</span>
        </div>
      </div>

      <div class="q" data-id="equipment">
        <div class="prompt">Кто вернул оборудование без регистрации в базе C.R.I.D.?</div>
        <div class="row">
          <input type="text" placeholder="Фамилия агента" autocomplete="off">
          <span class="tag">ожидание</span>
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="checkAll">Проверить все</button>
        <button class="btn" id="clearAll">Сбросить</button>
        <div id="globalStatus" class="status"></div>
      </div>
    </div>
  </section>

  <aside class="card side">
    <h3>Статус доступа</h3>
    <div class="content">
      <div class="box">
        Корректных ответов: <b id="countOK">0</b> / 5
      </div>
      <div id="qrWrap" class="qr">
        <div style="margin-bottom:8px;color:#bbf7d0">Доступ открыт — переход к следующему узлу</div>
        <a href="https://example.com/next" target="_blank" rel="noopener">
          <img src="qr_next.png" alt="QR для перехода">
        </a>
      </div>
    </div>
  </aside>
</div>

<script>
/* ===== ДАННЫЕ =====
   допускаем и кириллицу, и латиницу (ROGOV → Рогов). */
const ANSWERS = {
  alpha:    { ru: "ТУМАНОВА", en: "TUMANOVA" },
  north4:   { ru: "КОВТУН",   en: "KOVTUN"   },
  sector8:  { ru: "РОГОВ",    en: "ROGOV"    },
  intercept4:{ru: "СЕРОВ",    en: "SEROV"    },
  equipment:{ ru: "ЕЛИСЕЕВА", en: "ELISEEVA" }
};

// быстрый нормалайзер: приводим к верхнему регистру, убираем лишнее
const norm = s => (s||"").trim().toUpperCase().replace(/\s+/g," ");

// проверка одного блока
function checkBlock(qElem){
  const id = qElem.dataset.id;
  const input = qElem.querySelector("input");
  const tag = qElem.querySelector(".tag");
  const val = norm(input.value);

  const ok = (val === ANSWERS[id].ru) || (val === ANSWERS[id].en);
  tag.textContent = ok ? "верно" : (val ? "ошибка" : "ожидание");
  tag.className = "tag " + (ok ? "ok" : (val ? "err" : ""));
  qElem.dataset.ok = ok ? "1" : "0";
  return ok;
}

// массовая проверка
function evaluate(){
  let okCount = 0;
  document.querySelectorAll(".q").forEach(q => { if(checkBlock(q)) okCount++; });
  document.getElementById("countOK").textContent = okCount;
  const allOk = okCount === 5;
  document.getElementById("globalStatus").textContent = allOk ? "Все ответы верны." : "";
  document.getElementById("globalStatus").className = "status " + (allOk ? "ok" : "");
  document.getElementById("qrWrap").classList.toggle("show", allOk);
}

// события
document.getElementById("checkAll").addEventListener("click", evaluate);
document.getElementById("clearAll").addEventListener("click", ()=>{
  document.querySelectorAll(".q").forEach(q=>{
    q.querySelector("input").value = "";
    q.querySelector(".tag").textContent = "ожидание";
    q.querySelector(".tag").className = "tag";
    q.dataset.ok = "0";
  });
  document.getElementById("countOK").textContent = "0";
  document.getElementById("globalStatus").textContent = "";
  document.getElementById("globalStatus").className = "status";
  document.getElementById("qrWrap").classList.remove("show");
});
// лайв-валидация при выходе из поля/Enter
document.querySelectorAll(".q input").forEach(inp=>{
  inp.addEventListener("blur", e=>{ const q = e.target.closest(".q"); checkBlock(q); evaluate(); });
  inp.addEventListener("keydown", e=>{ if(e.key==="Enter"){ e.preventDefault(); e.target.blur(); }});
});
</script>
</body>
</html>
